<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Text 节点和 DocumentFragment 节点 | 博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="关均江的博客">
    
    <link rel="preload" href="/website/assets/css/0.styles.9986bf3e.css" as="style"><link rel="preload" href="/website/assets/js/app.72d1cbcf.js" as="script"><link rel="preload" href="/website/assets/js/2.9fa17cc6.js" as="script"><link rel="preload" href="/website/assets/js/88.5f00831c.js" as="script"><link rel="prefetch" href="/website/assets/js/10.1b01f282.js"><link rel="prefetch" href="/website/assets/js/100.543673e7.js"><link rel="prefetch" href="/website/assets/js/101.5df521b0.js"><link rel="prefetch" href="/website/assets/js/102.2d225125.js"><link rel="prefetch" href="/website/assets/js/103.e7992512.js"><link rel="prefetch" href="/website/assets/js/104.e77b9c4a.js"><link rel="prefetch" href="/website/assets/js/105.66e8fb54.js"><link rel="prefetch" href="/website/assets/js/106.0708d250.js"><link rel="prefetch" href="/website/assets/js/107.3dbd61c3.js"><link rel="prefetch" href="/website/assets/js/108.9bb11899.js"><link rel="prefetch" href="/website/assets/js/109.2adc1b88.js"><link rel="prefetch" href="/website/assets/js/11.db76f0e7.js"><link rel="prefetch" href="/website/assets/js/110.948b2442.js"><link rel="prefetch" href="/website/assets/js/111.fc12f452.js"><link rel="prefetch" href="/website/assets/js/112.2125a339.js"><link rel="prefetch" href="/website/assets/js/113.5f8c8ce8.js"><link rel="prefetch" href="/website/assets/js/114.a993e2f7.js"><link rel="prefetch" href="/website/assets/js/115.aa9431f2.js"><link rel="prefetch" href="/website/assets/js/116.0823f9ef.js"><link rel="prefetch" href="/website/assets/js/117.16da61d4.js"><link rel="prefetch" href="/website/assets/js/118.ea5fc0c1.js"><link rel="prefetch" href="/website/assets/js/119.74080c63.js"><link rel="prefetch" href="/website/assets/js/12.6c555b8b.js"><link rel="prefetch" href="/website/assets/js/120.8d79b5d4.js"><link rel="prefetch" href="/website/assets/js/121.c5193059.js"><link rel="prefetch" href="/website/assets/js/122.427994df.js"><link rel="prefetch" href="/website/assets/js/123.9584cc3e.js"><link rel="prefetch" href="/website/assets/js/124.7ab1beb8.js"><link rel="prefetch" href="/website/assets/js/125.3f0a7d4a.js"><link rel="prefetch" href="/website/assets/js/126.426d7ab2.js"><link rel="prefetch" href="/website/assets/js/127.ab3036a6.js"><link rel="prefetch" href="/website/assets/js/128.52766355.js"><link rel="prefetch" href="/website/assets/js/129.a6880451.js"><link rel="prefetch" href="/website/assets/js/13.8c951941.js"><link rel="prefetch" href="/website/assets/js/130.81191a19.js"><link rel="prefetch" href="/website/assets/js/131.0b5c9199.js"><link rel="prefetch" href="/website/assets/js/132.8518d9c6.js"><link rel="prefetch" href="/website/assets/js/133.aa21f51d.js"><link rel="prefetch" href="/website/assets/js/134.cd85131d.js"><link rel="prefetch" href="/website/assets/js/135.29ae6dd5.js"><link rel="prefetch" href="/website/assets/js/136.53901f75.js"><link rel="prefetch" href="/website/assets/js/137.4c3da7ae.js"><link rel="prefetch" href="/website/assets/js/138.e4443560.js"><link rel="prefetch" href="/website/assets/js/139.27d5bf81.js"><link rel="prefetch" href="/website/assets/js/14.6fbaea41.js"><link rel="prefetch" href="/website/assets/js/15.6961313d.js"><link rel="prefetch" href="/website/assets/js/16.f970f894.js"><link rel="prefetch" href="/website/assets/js/17.4ca05b49.js"><link rel="prefetch" href="/website/assets/js/18.8e020cc9.js"><link rel="prefetch" href="/website/assets/js/19.2a72c605.js"><link rel="prefetch" href="/website/assets/js/20.4d9c76cf.js"><link rel="prefetch" href="/website/assets/js/21.fb960aa3.js"><link rel="prefetch" href="/website/assets/js/22.8bfb8ff6.js"><link rel="prefetch" href="/website/assets/js/23.6c48ba2f.js"><link rel="prefetch" href="/website/assets/js/24.20bd2b52.js"><link rel="prefetch" href="/website/assets/js/25.9ea88fef.js"><link rel="prefetch" href="/website/assets/js/26.b119d6b4.js"><link rel="prefetch" href="/website/assets/js/27.9c150cbd.js"><link rel="prefetch" href="/website/assets/js/28.384ae726.js"><link rel="prefetch" href="/website/assets/js/29.0bdf71cf.js"><link rel="prefetch" href="/website/assets/js/3.68e5f300.js"><link rel="prefetch" href="/website/assets/js/30.c3d26c55.js"><link rel="prefetch" href="/website/assets/js/31.c1340cd9.js"><link rel="prefetch" href="/website/assets/js/32.fd88c40a.js"><link rel="prefetch" href="/website/assets/js/33.1c1c4895.js"><link rel="prefetch" href="/website/assets/js/34.1724715f.js"><link rel="prefetch" href="/website/assets/js/35.581d5cf8.js"><link rel="prefetch" href="/website/assets/js/36.d8870d15.js"><link rel="prefetch" href="/website/assets/js/37.3e30ed1f.js"><link rel="prefetch" href="/website/assets/js/38.64ac1205.js"><link rel="prefetch" href="/website/assets/js/39.c3c8ad50.js"><link rel="prefetch" href="/website/assets/js/4.eef8e9a7.js"><link rel="prefetch" href="/website/assets/js/40.4ad40d3c.js"><link rel="prefetch" href="/website/assets/js/41.5a0b4386.js"><link rel="prefetch" href="/website/assets/js/42.bbe43f8e.js"><link rel="prefetch" href="/website/assets/js/43.e7ecd95c.js"><link rel="prefetch" href="/website/assets/js/44.c62c5169.js"><link rel="prefetch" href="/website/assets/js/45.9e102c4c.js"><link rel="prefetch" href="/website/assets/js/46.554ac26e.js"><link rel="prefetch" href="/website/assets/js/47.b514d671.js"><link rel="prefetch" href="/website/assets/js/48.d7658615.js"><link rel="prefetch" href="/website/assets/js/49.d1002785.js"><link rel="prefetch" href="/website/assets/js/5.bdf0d823.js"><link rel="prefetch" href="/website/assets/js/50.78f1be7f.js"><link rel="prefetch" href="/website/assets/js/51.750d5ede.js"><link rel="prefetch" href="/website/assets/js/52.b1eb51e5.js"><link rel="prefetch" href="/website/assets/js/53.18ea93e6.js"><link rel="prefetch" href="/website/assets/js/54.a0acaaf0.js"><link rel="prefetch" href="/website/assets/js/55.32622c7e.js"><link rel="prefetch" href="/website/assets/js/56.b033037d.js"><link rel="prefetch" href="/website/assets/js/57.622415f0.js"><link rel="prefetch" href="/website/assets/js/58.093c795b.js"><link rel="prefetch" href="/website/assets/js/59.69c365a9.js"><link rel="prefetch" href="/website/assets/js/6.744a911e.js"><link rel="prefetch" href="/website/assets/js/60.6197bf91.js"><link rel="prefetch" href="/website/assets/js/61.39fd2d66.js"><link rel="prefetch" href="/website/assets/js/62.2ba6ac21.js"><link rel="prefetch" href="/website/assets/js/63.d53cca77.js"><link rel="prefetch" href="/website/assets/js/64.d6f4d1ec.js"><link rel="prefetch" href="/website/assets/js/65.0249b48c.js"><link rel="prefetch" href="/website/assets/js/66.75a33053.js"><link rel="prefetch" href="/website/assets/js/67.c690faed.js"><link rel="prefetch" href="/website/assets/js/68.8b33d61c.js"><link rel="prefetch" href="/website/assets/js/69.c0f481dc.js"><link rel="prefetch" href="/website/assets/js/7.3a413927.js"><link rel="prefetch" href="/website/assets/js/70.c3b94e63.js"><link rel="prefetch" href="/website/assets/js/71.44f80a16.js"><link rel="prefetch" href="/website/assets/js/72.cfcdbef4.js"><link rel="prefetch" href="/website/assets/js/73.28e36af8.js"><link rel="prefetch" href="/website/assets/js/74.79364fe9.js"><link rel="prefetch" href="/website/assets/js/75.d0e19b09.js"><link rel="prefetch" href="/website/assets/js/76.b94059df.js"><link rel="prefetch" href="/website/assets/js/77.dfc7549d.js"><link rel="prefetch" href="/website/assets/js/78.650f66aa.js"><link rel="prefetch" href="/website/assets/js/79.2e541360.js"><link rel="prefetch" href="/website/assets/js/8.e905a1ae.js"><link rel="prefetch" href="/website/assets/js/80.e9581b2f.js"><link rel="prefetch" href="/website/assets/js/81.11b4ab4e.js"><link rel="prefetch" href="/website/assets/js/82.a9e0d134.js"><link rel="prefetch" href="/website/assets/js/83.e3429019.js"><link rel="prefetch" href="/website/assets/js/84.e7252f94.js"><link rel="prefetch" href="/website/assets/js/85.8cd66f33.js"><link rel="prefetch" href="/website/assets/js/86.67021a51.js"><link rel="prefetch" href="/website/assets/js/87.f4746338.js"><link rel="prefetch" href="/website/assets/js/89.e1b02879.js"><link rel="prefetch" href="/website/assets/js/9.149fa029.js"><link rel="prefetch" href="/website/assets/js/90.5e3a8e06.js"><link rel="prefetch" href="/website/assets/js/91.fe3cd72f.js"><link rel="prefetch" href="/website/assets/js/92.38113950.js"><link rel="prefetch" href="/website/assets/js/93.d7fe4dd2.js"><link rel="prefetch" href="/website/assets/js/94.bfbab9a5.js"><link rel="prefetch" href="/website/assets/js/95.4c1a3c2e.js"><link rel="prefetch" href="/website/assets/js/96.747d45b5.js"><link rel="prefetch" href="/website/assets/js/97.9920b8b0.js"><link rel="prefetch" href="/website/assets/js/98.93be639f.js"><link rel="prefetch" href="/website/assets/js/99.b4185469.js">
    <link rel="stylesheet" href="/website/assets/css/0.styles.9986bf3e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/website/" class="home-link router-link-active"><!----> <span class="site-name">博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>入门篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>数据类型</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>运算符</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>语法专题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>标准库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>面向对象编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>异步操作</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>DOM</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/website/javascript/dom/general.html" class="sidebar-link">概述</a></li><li><a href="/website/javascript/dom/node.html" class="sidebar-link">Node 接口</a></li><li><a href="/website/javascript/dom/nodelist.html" class="sidebar-link">NodeList 接口，HTMLCollection 接口</a></li><li><a href="/website/javascript/dom/parentnode.html" class="sidebar-link">ParentNode 接口，ChildNode 接口</a></li><li><a href="/website/javascript/dom/document.html" class="sidebar-link">Document 节点</a></li><li><a href="/website/javascript/dom/element.html" class="sidebar-link">Element 节点</a></li><li><a href="/website/javascript/dom/attributes.html" class="sidebar-link">属性的操作</a></li><li><a href="/website/javascript/dom/text.html" aria-current="page" class="active sidebar-link">Text 节点和 DocumentFragment 节点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/website/javascript/dom/text.html#text-节点的概念" class="sidebar-link">Text 节点的概念</a></li><li class="sidebar-sub-header"><a href="/website/javascript/dom/text.html#text-节点的属性" class="sidebar-link">Text 节点的属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/website/javascript/dom/text.html#data" class="sidebar-link">data</a></li><li class="sidebar-sub-header"><a href="/website/javascript/dom/text.html#wholetext" class="sidebar-link">wholeText</a></li><li class="sidebar-sub-header"><a href="/website/javascript/dom/text.html#length" class="sidebar-link">length</a></li><li class="sidebar-sub-header"><a href="/website/javascript/dom/text.html#nextelementsibling-previouselementsibling" class="sidebar-link">nextElementSibling，previousElementSibling</a></li></ul></li><li class="sidebar-sub-header"><a href="/website/javascript/dom/text.html#text-节点的方法" class="sidebar-link">Text 节点的方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/website/javascript/dom/text.html#appenddata-deletedata-insertdata-replacedata-substringdata" class="sidebar-link">appendData()，deleteData()，insertData()，replaceData()，subStringData()</a></li><li class="sidebar-sub-header"><a href="/website/javascript/dom/text.html#remove" class="sidebar-link">remove()</a></li><li class="sidebar-sub-header"><a href="/website/javascript/dom/text.html#splittext" class="sidebar-link">splitText()</a></li></ul></li><li class="sidebar-sub-header"><a href="/website/javascript/dom/text.html#documentfragment-节点" class="sidebar-link">DocumentFragment 节点</a></li></ul></li><li><a href="/website/javascript/dom/css.html" class="sidebar-link">CSS 操作</a></li><li><a href="/website/javascript/dom/mutationobserver.html" class="sidebar-link">Mutation Observer API</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>事件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>浏览器模型</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>附录：网页元素接口</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES6</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="text-节点和-documentfragment-节点"><a href="#text-节点和-documentfragment-节点" class="header-anchor">#</a> Text 节点和 DocumentFragment 节点</h1> <h2 id="text-节点的概念"><a href="#text-节点的概念" class="header-anchor">#</a> Text 节点的概念</h2> <p>文本节点（<code>Text</code>）代表元素节点（<code>Element</code>）和属性节点（<code>Attribute</code>）的文本内容。如果一个节点只包含一段文本，那么它就有一个文本子节点，代表该节点的文本内容。</p> <p>通常我们使用父节点的<code>firstChild</code>、<code>nextSibling</code>等属性获取文本节点，或者使用<code>Document</code>节点的<code>createTextNode</code>方法创造一个文本节点。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 获取文本节点</span>
<span class="token keyword">var</span> textNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>

<span class="token comment">// 创造文本节点</span>
<span class="token keyword">var</span> textNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">'Hi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>textNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>浏览器原生提供一个<code>Text</code>构造函数。它返回一个文本节点实例。它的参数就是该文本节点的文本内容。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 空字符串</span>
<span class="token keyword">var</span> text1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 非空字符串</span>
<span class="token keyword">var</span> text2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">'This is a text node'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>注意，由于空格也是一个字符，所以哪怕只有一个空格，也会形成文本节点。比如，<code>&lt;p&gt; &lt;/p&gt;</code>包含一个空格，它的子节点就是一个文本节点。</p> <p>文本节点除了继承<code>Node</code>接口，还继承了<code>CharacterData</code>接口。<code>Node</code>接口的属性和方法请参考《Node 接口》一章，这里不再重复介绍了，以下的属性和方法大部分来自<code>CharacterData</code>接口。</p> <h2 id="text-节点的属性"><a href="#text-节点的属性" class="header-anchor">#</a> Text 节点的属性</h2> <h3 id="data"><a href="#data" class="header-anchor">#</a> data</h3> <p><code>data</code>属性等同于<code>nodeValue</code>属性，用来设置或读取文本节点的内容。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 读取文本内容</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>data
<span class="token comment">// 等同于</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>nodeValue

<span class="token comment">// 设置文本内容</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token string">'Hello World'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="wholetext"><a href="#wholetext" class="header-anchor">#</a> wholeText</h3> <p><code>wholeText</code>属性将当前文本节点与毗邻的文本节点，作为一个整体返回。大多数情况下，<code>wholeText</code>属性的返回值，与<code>data</code>属性和<code>textContent</code>属性相同。但是，某些特殊情况会有差异。</p> <p>举例来说，HTML 代码如下。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>para<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>A <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">&gt;</span></span>B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">&gt;</span></span> C<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这时，文本节点的<code>wholeText</code>属性和<code>data</code>属性，返回值相同。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'para'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>wholeText <span class="token comment">// &quot;A &quot;</span>
el<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>data <span class="token comment">// &quot;A &quot;</span>
</code></pre></div><p>但是，一旦移除<code>&lt;em&gt;</code>节点，<code>wholeText</code>属性与<code>data</code>属性就会有差异，因为这时其实<code>&lt;p&gt;</code>节点下面包含了两个毗邻的文本节点。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>el<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>para<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>wholeText <span class="token comment">// &quot;A C&quot;</span>
el<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>data <span class="token comment">// &quot;A &quot;</span>
</code></pre></div><h3 id="length"><a href="#length" class="header-anchor">#</a> length</h3> <p><code>length</code>属性返回当前文本节点的文本长度。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token comment">// 5</span>
</code></pre></div><h3 id="nextelementsibling-previouselementsibling"><a href="#nextelementsibling-previouselementsibling" class="header-anchor">#</a> nextElementSibling，previousElementSibling</h3> <p><code>nextElementSibling</code>属性返回紧跟在当前文本节点后面的那个同级元素节点。如果取不到元素节点，则返回<code>null</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// HTML 为</span>
<span class="token comment">// &lt;div&gt;Hello &lt;em&gt;World&lt;/em&gt;&lt;/div&gt;</span>
<span class="token keyword">var</span> tn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>
tn<span class="token punctuation">.</span>nextElementSibling
<span class="token comment">// &lt;em&gt;World&lt;/em&gt;</span>
</code></pre></div><p><code>previousElementSibling</code>属性返回当前文本节点前面最近的同级元素节点。如果取不到元素节点，则返回<code>null：</code>。</p> <h2 id="text-节点的方法"><a href="#text-节点的方法" class="header-anchor">#</a> Text 节点的方法</h2> <h3 id="appenddata-deletedata-insertdata-replacedata-substringdata"><a href="#appenddata-deletedata-insertdata-replacedata-substringdata" class="header-anchor">#</a> appendData()，deleteData()，insertData()，replaceData()，subStringData()</h3> <p>以下5个方法都是编辑<code>Text</code>节点文本内容的方法。</p> <ul><li><code>appendData()</code>：在<code>Text</code>节点尾部追加字符串。</li> <li><code>deleteData()</code>：删除<code>Text</code>节点内部的子字符串，第一个参数为子字符串开始位置，第二个参数为子字符串长度。</li> <li><code>insertData()</code>：在<code>Text</code>节点插入字符串，第一个参数为插入位置，第二个参数为插入的子字符串。</li> <li><code>replaceData()</code>：用于替换文本，第一个参数为替换开始位置，第二个参数为需要被替换掉的长度，第三个参数为新加入的字符串。</li> <li><code>subStringData()</code>：用于获取子字符串，第一个参数为子字符串在<code>Text</code>节点中的开始位置，第二个参数为子字符串长度。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// HTML 代码为</span>
<span class="token comment">// &lt;p&gt;Hello World&lt;/p&gt;</span>
<span class="token keyword">var</span> pElementText <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>

pElementText<span class="token punctuation">.</span><span class="token function">appendData</span><span class="token punctuation">(</span><span class="token string">'!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 页面显示 Hello World!</span>
pElementText<span class="token punctuation">.</span><span class="token function">deleteData</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 页面显示 Hello W</span>
pElementText<span class="token punctuation">.</span><span class="token function">insertData</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">'Hello '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 页面显示 Hello WHello</span>
pElementText<span class="token punctuation">.</span><span class="token function">replaceData</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'World'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 页面显示 Hello WWorld</span>
pElementText<span class="token punctuation">.</span><span class="token function">substringData</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 页面显示不变，返回&quot;World &quot;</span>
</code></pre></div><h3 id="remove"><a href="#remove" class="header-anchor">#</a> remove()</h3> <p><code>remove</code>方法用于移除当前<code>Text</code>节点。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// HTML 代码为</span>
<span class="token comment">// &lt;p&gt;Hello World&lt;/p&gt;</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 现在 HTML 代码为</span>
<span class="token comment">// &lt;p&gt;&lt;/p&gt;</span>
</code></pre></div><h3 id="splittext"><a href="#splittext" class="header-anchor">#</a> splitText()</h3> <p><code>splitText</code>方法将<code>Text</code>节点一分为二，变成两个毗邻的<code>Text</code>节点。它的参数就是分割位置（从零开始），分割到该位置的字符前结束。如果分割位置不存在，将报错。</p> <p>分割后，该方法返回分割位置后方的字符串，而原<code>Text</code>节点变成只包含分割位置前方的字符串。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// html 代码为 &lt;p id=&quot;p&quot;&gt;foobar&lt;/p&gt;</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> textnode <span class="token operator">=</span> p<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>

<span class="token keyword">var</span> newText <span class="token operator">=</span> textnode<span class="token punctuation">.</span><span class="token function">splitText</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
newText <span class="token comment">// &quot;bar&quot;</span>
textnode <span class="token comment">// &quot;foo&quot;</span>
</code></pre></div><p>父元素节点的<code>normalize</code>方法可以将毗邻的两个<code>Text</code>节点合并。</p> <p>接上面的例子，文本节点的<code>splitText</code>方法将一个<code>Text</code>节点分割成两个，父元素的<code>normalize</code>方法可以实现逆操作，将它们合并。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>p<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token comment">// 2</span>

<span class="token comment">// 将毗邻的两个 Text 节点合并</span>
p<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token comment">// 1</span>
</code></pre></div><h2 id="documentfragment-节点"><a href="#documentfragment-节点" class="header-anchor">#</a> DocumentFragment 节点</h2> <p><code>DocumentFragment</code>节点代表一个文档的片段，本身就是一个完整的 DOM 树形结构。它没有父节点，<code>parentNode</code>返回<code>null</code>，但是可以插入任意数量的子节点。它不属于当前文档，操作<code>DocumentFragment</code>节点，要比直接操作 DOM 树快得多。</p> <p>它一般用于构建一个 DOM 结构，然后插入当前文档。<code>document.createDocumentFragment</code>方法，以及浏览器原生的<code>DocumentFragment</code>构造函数，可以创建一个空的<code>DocumentFragment</code>节点。然后再使用其他 DOM 方法，向其添加子节点。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> docFrag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">var</span> docFrag <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> li <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
li<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Hello World'</span><span class="token punctuation">;</span>
docFrag<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>docFrag<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面代码创建了一个<code>DocumentFragment</code>节点，然后将一个<code>li</code>节点添加在它里面，最后将<code>DocumentFragment</code>节点移动到原文档。</p> <p>注意，<code>DocumentFragment</code>节点本身不能被插入当前文档。当它作为<code>appendChild()</code>、<code>insertBefore()</code>、<code>replaceChild()</code>等方法的参数时，是它的所有子节点插入当前文档，而不是它自身。一旦<code>DocumentFragment</code>节点被添加进当前文档，它自身就变成了空节点（<code>textContent</code>属性为空字符串），可以被再次使用。如果想要保存<code>DocumentFragment</code>节点的内容，可以使用<code>cloneNode</code>方法。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>document
  <span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>docFrag<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面这样添加<code>DocumentFragment</code>节点进入当前文档，不会清空<code>DocumentFragment</code>节点。</p> <p>下面是一个例子，使用<code>DocumentFragment</code>反转一个指定节点的所有子节点的顺序。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> f <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>lastChild<span class="token punctuation">)</span> f<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>lastChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
  n<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>DocumentFragment</code>节点对象没有自己的属性和方法，全部继承自<code>Node</code>节点和<code>ParentNode</code>接口。也就是说，<code>DocumentFragment</code>节点比<code>Node</code>节点多出以下四个属性。</p> <ul><li><code>children</code>：返回一个动态的<code>HTMLCollection</code>集合对象，包括当前<code>DocumentFragment</code>对象的所有子元素节点。</li> <li><code>firstElementChild</code>：返回当前<code>DocumentFragment</code>对象的第一个子元素节点，如果没有则返回<code>null</code>。</li> <li><code>lastElementChild</code>：返回当前<code>DocumentFragment</code>对象的最后一个子元素节点，如果没有则返回<code>null</code>。</li> <li><code>childElementCount</code>：返回当前<code>DocumentFragment</code>对象的所有子元素数量。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/website/javascript/dom/attributes.html" class="prev">
        属性的操作
      </a></span> <span class="next"><a href="/website/javascript/dom/css.html">
        CSS 操作
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/website/assets/js/app.72d1cbcf.js" defer></script><script src="/website/assets/js/2.9fa17cc6.js" defer></script><script src="/website/assets/js/88.5f00831c.js" defer></script>
  </body>
</html>
